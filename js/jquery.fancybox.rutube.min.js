!function(o){if(!o.fancybox)return;void 0===o.fancybox.defaults&&(o.fancybox.defaults={}),void 0===o.fancybox.defaults.media&&(o.fancybox.defaults.media={});function r(t){return(t=(t+"").match(/https:\/\/rutube\.ru\/play\/embed\/([A-Za-z0-9]+)/))?t[1]:null}let d=!1;function n(){const e=o.fancybox.getInstance().current.$content.find("iframe");if(e&&e.length){var t,a=r(e.attr("src"));const n=function(t){!0===t&&e[0].contentWindow.postMessage(JSON.stringify({type:"player:setCurrentTime",data:{time:0}}),"*"),e[0].contentWindow.postMessage(JSON.stringify({type:"player:play",data:{}}),"*")};a?(a=a,t=function(){n(!0)},c[a]=t,d||(window.addEventListener("message",function(t){try{var e=JSON.parse(t.data);"player:ready"===e.type&&e.data&&e.data.videoId&&c[e.data.videoId]&&(c[e.data.videoId](),u(e.data.videoId))}catch(t){}}),d=!0)):(n(),e.on("load",n))}}const c={},u=function(t){t&&c[t]&&delete c[t]};o.fancybox.defaults.media.rutube={matcher:/rutube\.ru\/((video\/(private\/)?)|(play\/embed\/))([A-Za-z0-9]+)(\/(\?(.*)))?/i,params:{t:0},paramPlace:8,type:"iframe",url:"https://rutube.ru/play/embed/$5/"},o(document).on("afterShow.fb",function(t,e,a){"rutube"===a.contentSource&&n()}),o(document).on("beforeClose.fb",function(t,e,a){"rutube"===a.contentSource&&(a=o.fancybox.getInstance().current.$content.find("iframe"))&&a.length&&(a=r(a.attr("src")))&&u(a)})}(jQuery);
//# sourceMappingURL=jquery.fancybox.rutube.min.js.map